<?xml version="1.0" encoding="UTF-8"?>

<entities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/entity-definition-3.xsd">
    <view-entity entity-name="EligibleOrdersForNetSuiteView" package="co.hotwax.order" group="ofbiz_transactional">
        <member-entity entity-alias="OH" entity-name="org.apache.ofbiz.order.order.OrderHeader"/>
        <member-entity entity-alias="SCENM" entity-name="org.apache.ofbiz.common.enum.Enumeration" join-from-alias="OH" join-optional="true">
            <key-map field-name="salesChannelEnumId" related="enumId"/>
        </member-entity>
        <member-entity entity-alias="OID" entity-name="co.hotwax.order.OrderIdentification" join-from-alias="OH" join-optional="true">
            <key-map field-name="orderId"/>
            <entity-condition>
                <econdition entity-alias="OID" field-name="orderIdentificationTypeId" value="NETSUITE_ORDER_ID"/>
                <date-filter/>
            </entity-condition>
        </member-entity>
        <member-entity entity-alias="ODR" entity-name="org.apache.ofbiz.order.order.OrderRole" join-from-alias="OH" join-optional="true">
            <key-map field-name="orderId"/>
            <entity-condition>
                <econdition entity-alias="ODR" field-name="roleTypeId" operator="equals" value="BILL_TO_CUSTOMER"/>
            </entity-condition>
        </member-entity>
        <member-entity entity-alias="PID" entity-name="org.apache.ofbiz.party.party.PartyIdentification" join-from-alias="ODR">
            <key-map field-name="partyId"/>
            <entity-condition>
                <econdition entity-alias="PID" field-name="partyIdentificationTypeId" value="NETSUITE_CUSTOMER_ID"/>
            </entity-condition>
        </member-entity>
        <member-entity entity-alias="OCMBL" entity-name="org.apache.ofbiz.order.order.OrderContactMech" join-from-alias="OH" join-optional="true">
            <key-map field-name="orderId"/>
            <entity-condition>
                <econdition entity-alias="OCMBL" field-name="contactMechPurposeTypeId" operator="equals" value="BILLING_LOCATION"/>
            </entity-condition>
        </member-entity>
        <member-entity entity-alias="PAB" entity-name="org.apache.ofbiz.party.contact.PostalAddress" join-from-alias="OCMBL" join-optional="true">
            <key-map field-name="contactMechId"/>
        </member-entity>
        <member-entity entity-alias="OCMSL" entity-name="org.apache.ofbiz.order.order.OrderContactMech" join-from-alias="OH" join-optional="true">
            <key-map field-name="orderId"/>
            <entity-condition>
                <econdition entity-alias="OCMSL" field-name="contactMechPurposeTypeId" operator="equals" value="SHIPPING_LOCATION"/>
            </entity-condition>
        </member-entity>
        <member-entity entity-alias="PAS" entity-name="org.apache.ofbiz.party.contact.PostalAddress" join-from-alias="OCMSL" join-optional="true">
            <key-map field-name="contactMechId"/>
        </member-entity>
        <member-entity entity-alias="OCMBP" entity-name="org.apache.ofbiz.order.order.OrderContactMech" join-from-alias="OH" join-optional="true">
            <key-map field-name="orderId"/>
            <entity-condition>
                <econdition entity-alias="OCMBP" field-name="contactMechPurposeTypeId" operator="equals" value="PHONE_BILLING"/>
            </entity-condition>
        </member-entity>
        <member-entity entity-alias="TN" entity-name="org.apache.ofbiz.party.contact.TelecomNumber" join-from-alias="OCMBP" join-optional="true">
            <key-map field-name="contactMechId"/>
        </member-entity>
        <member-entity entity-alias="OADJ" entity-name="org.apache.ofbiz.order.order.OrderAdjustment" join-from-alias="OH" join-optional="true">
            <key-map field-name="orderId"/>
            <entity-condition>
                <econdition field-name="orderAdjustmentTypeId" value="SHIPPING_CHARGES"/>
            </entity-condition>
        </member-entity>
        <member-entity entity-alias="OPP" entity-name="org.apache.ofbiz.order.order.OrderPaymentPreference" join-from-alias="OH" join-optional="true">
            <key-map field-name="orderId"/>
            <entity-condition>
                <econdition field-name="paymentMethodTypeId" value="EXT_GIFT_CARD"/>
            </entity-condition>
        </member-entity>
        <entity-condition>
            <econdition entity-alias="OH" field-name="orderTypeId" operator="equals" value="SALES_ORDER"/>
            <econdition entity-alias="OID" field-name="orderId" operator="equals" value=""/>
        </entity-condition>
        <alias-all entity-alias="OH"/>
        <alias name="shippingAddress1" field="address1" entity-alias="PAS"/>
        <alias name="shippingAddress2" field="address2" entity-alias="PAS"/>
        <alias name="shippingCity" field="city" entity-alias="PAS"/>
        <alias name="shippingState" field="stateProvinceGeoId" entity-alias="PAS"/>
        <alias name="shippingPostalCode" field="postalCode" entity-alias="PAS"/>
        <alias name="billingAddress1" field="address2" entity-alias="PAB"/>
        <alias name="billingAddress2" field="address2" entity-alias="PAB"/>
        <alias name="billingCity" field="city" entity-alias="PAB"/>
        <alias name="billingState" field="stateProvinceGeoId" entity-alias="PAB"/>
        <alias name="billingPostalCode" field="postalCode" entity-alias="PAB"/>
        <alias name="NetsuiteCustomerId" field="idValue" entity-alias="PID"/>
        <alias name="salesChannel" field="description" entity-alias="SCENM"/>
        <alias-all entity-alias="TN"/>
        <alias name="ShippingCharge" field="amount" entity-alias="OADJ"/>
        <alias name="giftCardAmountSum" field="maxAmount" entity-alias="OPP"/>
    </view-entity>
</entities>